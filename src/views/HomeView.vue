<template>
  <div>
    <header class="Menu">
      <ul>
        <li><a href="#generator">Генератор String Art</a></li>
        <li><router-link :to="{ name: 'UserProfile' }">Помощник String Art</router-link></li>
        <li><a href="#contacts">Контакты</a></li>
      </ul>
    </header>
    <div class="main">
    <div class="main-title">
      Загрузите файл инструкции .txt, которой вам вам пришел на почту.
    </div>
    <label for="txt" class="main-txt">
      <input ref="txt" type="file" id="txt">
        {{ file ? 'Файл выбран' : 'Выберите файл'  }}
    </label>
    <div class="main-label">Выберите форму картины</div>
    <div class="main-types">
      <div @click="imageType = 1" class="main-types-square">
        <svg v-if="imageType === 1" width="68" height="50" viewBox="0 0 68 50" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M67.0042 1.02678C65.6765 -0.301081 63.5238 -0.301081 62.1958 1.02678L21.4617 41.7613L5.80418 26.1038C4.47645 24.7759 2.32383 24.776 0.995833 26.1038C-0.332026 27.4315 -0.332026 29.5841 0.995833 30.912L19.0575 48.9734C20.3849 50.3011 22.5391 50.3002 23.8659 48.9734L67.0042 5.83512C68.332 4.50739 68.3319 2.35464 67.0042 1.02678Z" fill="#25E477"/>
        </svg>
      </div>
      <div @click="imageType = 2" class="main-types-circle">
        <svg v-if="imageType === 2" width="68" height="50" viewBox="0 0 68 50" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M67.0042 1.02678C65.6765 -0.301081 63.5238 -0.301081 62.1958 1.02678L21.4617 41.7613L5.80418 26.1038C4.47645 24.7759 2.32383 24.776 0.995833 26.1038C-0.332026 27.4315 -0.332026 29.5841 0.995833 30.912L19.0575 48.9734C20.3849 50.3011 22.5391 50.3002 23.8659 48.9734L67.0042 5.83512C68.332 4.50739 68.3319 2.35464 67.0042 1.02678Z" fill="#25E477"/>
        </svg>
      </div>
    </div>
    <div class="main-output">
      <canvas :style="{'border-radius': imageType === 1 ? '0' : '100%'}" id="output"></canvas>
    </div>
    <div class="main-drawinfo">
      <span>Пинов: 300</span>
      <span>Итераций: 3000</span>
    </div>
    <div class="main-line-list">
    <div class="main-line-list-container">
      <div v-for="item in limitedItems" :key="item.key" class="main-item">
        <div class="main-item-value">{{ item.value }}</div>
        <div class="main-item-key">{{ item.key }}</div>
      </div>
    </div>
  </div>
    <div class="main-btns">
      <button class="main-btn">Назад</button>
      <button class="main-btn">Вперед</button>
    </div>
    <div class="main-autosteps">
      <div @click="autoStep = 1" :class="{'selected': autoStep === 1}" class="main-autosteps-option">1</div>
      <div @click="autoStep = 2" :class="{'selected': autoStep === 2}" class="main-autosteps-option">2</div>
      <div @click="autoStep = 3" :class="{'selected': autoStep === 3}" class="main-autosteps-option">3</div>
      <div @click="autoStep = 4" :class="{'selected': autoStep === 4}" class="main-autosteps-option">4</div>
      <div @click="autoStep = 5" :class="{'selected': autoStep === 5}" class="main-autosteps-option">5</div>
    </div>
    <button class="main-autosteps-btn">Автошаг</button>
    <input type="text" placeholder="Введите № шага или последовательность через запятую" class="main-step-number">
    <button class="main-step-number-btn">Перейти</button>
    <div class="main-handler">
      <div class="main-handler-title">
        Громкость: {{volume}}%
      </div>
    </div>
    <div class="main-handler">
      <div class="main-handler-title">
        Озвучивание текста
      </div>
      <div @click="toggler = !toggler"  class="main-toggle" :class="{'toggler-active': toggler}">
        <div class="main-toggle-circle" :class="{'circle-active': toggler}"></div>
        <span v-if="!toggler" class="main-toggle-disabled">Выкл</span>
        <span v-if="toggler" class="main-toggle-enabled">Вкл</span>
      </div>
    </div>
    
    <range-slider
      class="main-volume"
      min="0"
      max="100"
      step="1"
      v-model="volume">
    </range-slider>
  </div>
  </div>
  
</template>
<script>
import RangeSlider from 'vue-range-slider'
export default {
  name: 'HomeView',
  components: {
    RangeSlider
  },
  data: () => ({
    imageType: 1,
    volume: 20,
    toggler: false,
    file: false,
    outputItems: [],
    speech: true,
    autoStep: 1
  }),
  computed: {
    limitedItems() {
      return this.outputItems.slice(0, 3);
    }
  },
  mounted() {
  const canvas = document.getElementById('output');
  const ctx = canvas.getContext('2d');
  // Define points
  const points = `0,127,22,147,276,144,21,126,20,142,9,139,270,140,271,141,8,138,274,137,7,136,273,143,275,146,23,151,25,152,281,155,26,157,27,160,28,162,30,165,32,168,31,164,29,161,33,169,34,172,63,175,69,179,71,174,35,167,61,177,68,170,32,163,30,159,28,154,280,153,26,150,281,149,277,146,12,114,13,116,14,118,17,122,18,123,20,125,22,145,11,140,276,148,278,141,7,139,277,105,275,104,274,142,279,149,24,131,3,130,16,120,10,143,272,135,8,136,5,133,25,156,282,157,284,159,31,171,59,161,27,152,285,151,280,148,10,121,19,135,6,137,276,142,11,113,13,124,287,170,31,166,67,169,61,179,65,162,33,175,70,181,72,178,66,163,29,145,283,150,278,152,23,128,1,129,16,119,9,135,26,146,282,155,286,168,57,163,60,166,55,159,287,130,24,147,30,171,34,177,64,180,63,164,33,173,67,162,58,167,285,123,12,112,11,149,283,154,32,172,1,126,14,127,2,132,23,144,272,142,13,146,10,138,269,139,286,140,6,115,15,119,18,124,20,122,12,137,273,135,17,133,4,131,5,156,281,151,277,106,278,143,282,149,274,121,284,166,65,160,71,169,35,173,59,174,70,183,72,170,34,176,66,164,28,144,11,111,13,125,19,134,260,133,266,132,18,118,8,137,285,169,73,175,4,174,32,167,64,154,281,125,286,156,63,182,71,171,60,170,0,163,67,178,58,157,283,158,32,155,64,187,70,159,53,164,56,168,74,180,72,166,34,161,30,167,15,131,26,132,8,108,279,140,9,109,1,133,268,138,285,153,10,134,18,120,11,123,21,128,286,171,287,169,55,170,29,152,282,144,3,151,275,102,271,99,270,98,189,68,184,45,183,66,161,73,165,284,148,22,126,15,118,16,115,5,138,273,144,9,131,267,140,14,128,2,149,62,168,284,160,59,176,72,159,73,158,286,127,24,135,261,134,0,123,19,139,275,130,6,114,188,112,2,162,64,184,92,178,35,179,62,205,67,167,63,199,60,202,61,185,50,160,7,129,17,117,8,147,278,105,276,103,181,65,156,284,152,279,144,5,176,69,182,91,177,94,208,60,186,21,127,256,128,285,150,13,112,10,125,287,141,273,140,17,144,32,175,31,121,16,166,68,172,286,131,20,184,71,156,14,136,6,177,72,161,1,125,23,129,263,135,7,108,10,107,185,63,163,287,142,271,100,184,109,186,58,200,59,146,280,150,61,168,36,172,74,160,64,176,17,119,28,118,270,97,177,5,137,269,132,264,116,187,22,111,2,168,285,161,9,110,280,155,73,171,0,140,8,129,25,134,259,136,18,112,184,22,130,257,132,4,145,276,152,33,174,37,138,12,115,188,54,161,62,198,74,158,56,187,95,269,119,10,128,265,133,3,153,278,107,8,142,33,124,15,109,4,125,11,139,268,134,274,146,5,175,90,165,283,128,16,117,29,115,25,191,53,166,73,190,54,171,66,185,111,188,96,181,36,173,287,157,64,207,65,202,93,203,61,147,271,131,16,145,0,162,68,149,14,132,260,135,287,172,70,160,1,150,277,141,9,133,13,180,104,5,116,17,121,20,107,210,33,131,276,154,74,202,62,173,91,179,12,124,22,110,213,69,191,104,278,139,262,127,20,185,119,30,114,19,176,99,190,24,113,183,21,117,273,148,63,205,31,206,59,178,1,141,15,169,284,120,187,112,26,192,53,186,71,153,282,129,3,166,286,167,62,191,59,182,49,159,63,177,69,154,4,126,285,171,95,212,71,148,279,163,12,113,186,65,158,8,134,264,142,7,127,15,120,24,126,34,174,72,168,75,159,71,150,25,110,27,194,55,185,92,172,2,164,0,112,22,252,23,121,184,57,165,36,170,100,189,25,144,280,125,21,131,11,155,267,157,66,180,58,164,9,121,214,119,188,51,168,101,206,67,175,2,103,6,152,74,156,268,132,15,160,287,122,269,96,270,136,274,129,217,72,149,32,205,139,4,165,56,197,62,186,118,283,166,64,152,69,218,73,157,16,136,206,138,263,38,262,113,26,111,180,116,29,171,97,187,24,253,125,32,207,94,209,60,145,208,31,123,268,141,70,195,48,188,63,181,2,121,185,40,137,283,122,183,101,178,68,165,72,147,1,107,276,153,265,92,169,286,173,73,163,8,126,19,105,7,117,26,255,129,258,136,4,106,186,42,181,115,189,23,111,212,64,179,67,211,61,159,283,133,20,251,21,116,177,18,162,282,167,95,189,71,220,131,212,34,182,14,122,213,125,207,68,143,6,102,4,170,74,153,286,107,24,108,184,46,191,56,203,83,205,94,172,57,158,0,129,35,260,36,259,133,270,130,266,157,71,175,109,187,59,162,74,151,70,140,205,137,13,110,3,185,115,269,97,166,29,256,33,209,63,200,79,198,52,187,126,272,146,208,103,279,122,25,192,106,5,113,178,70,210,32,256,109,16,249,15,114,177,56,160,90,176,117,27,205,59,180,48,183,115,265,141,206,58,156,73,174,0,110,181,18,102,189,125,14,167,232,168,34,211,150,67,190,26,253,21,122,210,104,1,138,69,142,282,145,277,109,28,257,135,218,121,33,178,7,132,60,151,260,123,182,54,198,72,146,62,148,208,143,3,127,12,141,281,166,98,191,66,169,94,201,30,206,133,26,193,65,178,39,265,118,175,60,190,70,219,69,164,279,154,285,110,171,90,263,88,209,128,268,111,12,248,11,135,206,57,134,267,144,207,118,272,159,6,145,72,218,123,13,105,23,186,47,194,63,155,66,134,202,129,284,124,9,138,226,157,271,101,17,250,18,117,20,139,214,35,261,37,211,97,164,52,158,268,118,180,124,190,114,29,113,23,254,25,204,61,181,104,287,154,266,40,177,71,216,145,68,180,2,151,12,96,169,230,150,274,126,185,102,16,251,118,9,106,21,187,117,208,36,160,51,196,55,157,231,166,234,173,109,259,85,205,105,180,120,250,14,138,262,129,26,108,3,182,1,165,51,198,64,137,218,95,214,148,73,153,61,149,208,28,115,30,255,131,17,120,175,91,163,2,133,59,130,217,142,70,154,264,37,180,62,203,31,257,24,206,119,19,99,221,144,275,134,258,23,109,182,103,17,127,223,162,29,207,55,192,60,160,228,143,209,98,163,104,277,116,4,114,31,113,170,286,120,3,132,219,75,169,70,176,119,263,156,279,141,204,30,258,110,177,0,95,188,22,117,181,35,127,272,139,210,61,171,235,172,3,124,254,20,252,126,180,43,189,58,196,28,260,23,130,13,251,9,248,8,193,52,169,227,164,73,264,127,212,153,5,103,24,256,28,205,144,70,149,53,126,224,133,192,74,216,151,209,140,10,136,283,115,22,153,9,104,239,175,122,49,168,111,25,253,13,164,90,156,53,202,33,257,128,184,67,269,112,261,137,68,262,135,65,154,212,100,18,175,6,248,13,122,32,206,36,213,34,120,186,105,162,99,202,133,58,140,217,158,231,101,246,184,39,181,15,134,218,163,233,97,13,139,67,149,230,172,240,98,243,107,4,249,17,113,267,94,1,183,56,278,157,269,65,174,123,281,146,270,160,218,115,263,89,158,61,155,284,92,153,230,168,16,116,188,98,262,36,217,66,145,273,128,31,150,210,136,226,159,101,276,56,152,208,141,71,219,139,61,200,57,180,107,27,261,140,229,146,215,72,188,25,109,286,96,236,176,111,281,116,267,39,135,0,169,57,124,251,22,261,152,3,164,258,32,255,15,117,216,149,50,121,179,108,287,127,52,197,123,271,137,45,194,68,273,122,177,238,100,169,114,26,250,10,94,269,155,50,189,134,65,132,6,101,188,56,135,29,210,111,170,283,109,213,152,228,129,9,149,218,43,151,279,106,25,205,146,64,201,54,273,176,241,108,21,262,168,235,100,160,222,131,62,144,72,173,239,179,129,183,41,175,124,19,257,127,251,5,247,7,161,217,143,280,57,198,75,271,134,191,8,125,54,154,91,285,122,22,190,55,274,120,51,186,99,18,254,119,184,78,182,130,256,25,136,230,155,212,60,267,160,281,70,270,173,266,137,15,148,275,125,27,250,191,253,28,195,61,182,238,188,66,142,12,149,93,14,107,172,60,184,74,219,162,75,280,112,30,200,278,155,265,26,259,157,210,35,205,142,58,282,158,228,175,56,125,187,135,61,164,218,36,123,252,121,48,185,2,248,5,129,19,115,167,76,271,145,232,171,264,97,241,189,112,24,104,4,252,193,140,7,249,102,237,105,159,253,187,74,282,164,103,184,3,137,19,262,86,203,22,259,32,177,232,160,225,146,2,142,26,211,69,170,222,148,90,178,111,284,150,92,262,118,4,63,268,40,176,123,209,154,256,83,258,93,10,248,193,255,149,60,131,64,230,51,190,100,20,114,167,229,43,171,112,177,242,99,6,250,1,148,69,271,226,130,252,15,125,173,56,205,61,2,122,9,117,166,260,37,220,106,19,184,53,120,183,108,11,254,27,207,151,64,172,223,138,284,153,218,139,70,146,269,129,62,152,94,13,181,106,242,188,256,14,98,180,34,215,154,51,194,11,114,23,265,29,251,190,44,157,49,120,167,281,200,73,217,162,236,179,110,28,203,94,188,129,207,37,229,52,175,130,27,258,35,264,158,106,185,136,267,154,16,134,279,58,235,46,182,96,221,269,125,171,241,105,287,248,14,258,193,69,201,252,25,261,97,17,104,168,113,279,67,273,56,146,220,136,68,153,33,208,256,161,99,244,71,164,47,178,238,189,97,191,27,108,44,167,54,206,255,7,131,174,240,176,113,269,142,72,277,57,143,90,155,225,263,25,248,103,235,42,188,4,226,133,272,75,204,147,219,168,58,283,119,51,150,34,128,249,286,162,108,188,139,206,70,263,26,210,31,124,35,171,228,180,129,266,22,185,45,121,11,197,29,202,58,207,101,243,190,105,273,227,274,103,201,144,2,93,266,153,283,94,259,213,118,165,229,61,269,25,260,139,64,7,90,169,112,286,224,1,247,8,67,135,270,41,191,123,49,194,145,71,170,267,195,265,24,140,187,57,208,64,133,219,100,245,111,172,124,58,183,79,191,146,94,237,287,59,132,21,267,92,259,211,138,184,107,234,174,61,285,250,117,177,60,286,88,284,164,119,212,37,223,275,66,205,254,3,134,48,150,95,235,139,194,73,154,101,16,111,46,219,163,255,27,248,74,185,238,164,231,141,274,198,261,38,139,29,254,16,179,225,166,116,253,151,91,183,5,101,234,279,56,210,140,233,102,168,67,212,94,174,42,227,268,66,278,118,161,17,70,192,249,8,111,257,10,115,175,35,98,19,253,4,123,173,64,203,276,55,178,108,210,158,15,93,261,217,156,258,131,229,142,250,283,126,170,220,45,232,97,181,231,103,11,202,23,264,40,180,6,127,275,138,57,282,236,188,124,28,151,203,79,211,135,32,209,146,99,34,265,215,114,166,125,69,278,160,67,201,21,74,150,228,50,163,121,177,130,61,267,139,6,188,254,1,226,269,38,183,75,172,241,192,100,179,106,2,137,60,238,96,265,20,182,107,44,103,185,59,281,157,72,235,48,160,10,109,180,23,191,266,227,283,117,265,121,212,258,52,129,63,259,13,200,26,251,199,71,205,153,107,256,35,97,39,169,235,155,100,214,42,236,184,247,3,102,23,266,18,103,175,134,223,281,72,196,81,187,46,155,208,147,190,252,8,116,285,89,7,65,16,188,74,247,10,144,192,45,166,90,140,263,35,218,68,239,100,145,88,262,224,118,172,109,26,158,115,179,131,202,95,268,20,71,217,107,212,163,273,74,167,223,272,55,149,96,190,246,286,255,126,263,199,279,161,122,195,10,63,147,73,270,225,5,65,197,253,43,216,113,164,118,273,40,184,35,120,221,139,56,123,160,25,264,227,0,248,284,136,244,196,59,150,53,181,108,177,21,137,91,185,104,240,190,18,269,93,36,155,70,274,162,257,82,275,191,101,236,192,9,65,120,264,62,206,128,66,233,170,53,155,287,94,215,159,211,31,256,0,60,2,253,203,105,6,90,13,115,165,272,99,226,143,194,149,108,274,224,49,175,223,173,68,278,248,23,76,163,96,19,182,44,155,88,140,212,265,226,3,105,231,174,111,5,125,181,47,151,222,96,205,275,69,127,168,269,29,261,133,176,33,216,266,77,173,3,119,160,13,63,237,165,100,185,229,59,207,34,203,115,43,187,67,20,250,127,282,51,153,103,251,281,144,101,265,131,169,110,17,184,146,238,106,45,278,235,188,36,91,266,14,198,83,226,168,218,262,24,75,179,287,139,90,255,186,141,250,200,283,107,164,128,176,43,161,114,266,31,260,222,122,57,136,46,170,5,117,64,8,185,4,97,147,273,232,163,13,183,244,146,30,213,257,87,286,248,189,149,73,220,279,145,218,98,33,95,11,171,242,191,72,19,270,18,143,65,276,129,254,190,4,225,261,66,210,118,29,111,149,91,180,54,257,34,125,256,56,151,212,68,202,82,251,152,14,99,41,231,67,140,176,109,153,7,253,32,201,279,124,69,167,112,179,11,260,150,104,183,106,13,129,192,234,113,14,168,259,224,187,75,190,42,217,165,60,127,177,246,287,257,210,105,182,35,94,235,64,270,22,68,120,158,205,250,155,5,259,27,262,122,10,56,253,182,74,203,100,7,110,267,99,21,265,139,32,85,212,103,20,138,199,97,235,179,120,163,129,167,59,213,177,132,285,160,250,29,71,260,216,37,185,78,221,277,249,283,256,218,75,158,62,170,17,271,172,263,18,154,90,135,174,53,5,191,269,47,205,73,258,25,272,70,166,8,104,211,130,54,235,51,146,256,134,91,221,268,192,238,195,154,115,270,37,170,57,266,118,287,228,38,103,190,245,278,102,142,208,70,135,72,221,127,185,23,164,45,241,66,279,117,32,112,162,121,157,40,263,209,109,43,184,105,46,189,247,103,284,236,166,215,39,262,155,192,27,143,13,202,137,72,162,253,122,178,107,221,2,126,227,14,272,236,75,249,186,229,180,269,71,18,271,34,96,6,64,191,19,140,284,47,239,280,121,26,68,164,16,125,157,88,150,187,49,256,85,192,243,185,70,216,101,21,66,181,77,177,139,103,9,62,211,96,239,11,154,123,248,7,116,178,137,31,259,286,176,54,230,106,173,225,153,210,132,58,234,104,187,113,251,277,157,114,180,79,284,217,34,88,11,55,124,159,265,8,179,41,219,152,116,170,91,256,6,122,197,250,3,62,196,252,32,99,286,143,69,15,151,231,85,260,184,94,133,277,98,1,175,142,16,244,138,30,207,22,264,228,24,74,17,155,204,276,160,73,193,235,269,161,222,174,212,129,229,65,122,52,109,145,253,185,256,116,173,44,152,34,136,190,9,247,48,124,0,254,221,181,51,103,192,273,17,95,168,109,282,257,223,177,274,14,184,82,268,23,188,40,213,262,194,253,79,207,91,9,115,148,183,95,38,134,167,118,56,237,286,76,22,129,225,164,272,214,185,222,287,147,14,111,249,201,59,264,150,282,203,7,55,121,171,224,136,92,129,158,4,52,173,98,46,115,63,152,125,261,195,68,25,262,67,220,165,259,120,197,246,105,285,164,43,192,139,86,4,169,123,272,22,73,188,146,38,267,117,168,212,28,133,54,286,256,207,127,271,36,90,144,190,234,110,45,236,160,104,252,280,73,141,174,275,161,2,176,268,233,61,145,266,5,151,24,138,90,177,239,105,257,47,159,109,278,238,111,64,1,134,93,232,195,251,282,97,206,69,158,29,160,191,264,215,180,245,20,269,175,139,261,87,35,115,247,204,27,119,21,274,16,96,128,26,260,223,188,59,237,70,249,28,169,13,228,142,106,207,150,184,75,217,96,259,53,108,214,130,170,227,128,7,149,118,63,230,47,169,229,90,2,113,182,266,39,94,31,71,243,100,281,133,201,81,253,277,48,117,194,154,46,260,188,110,30,173,144,53,189,62,11,273,28,112,4,186,24,267,13,99,215,74,265,40,174,51,128,250,148,18,178,212,146,172,9,55,204,119,159,94,219,264,232,131,161,226,180,134,71,143,0,251,216,144,113,173,63,273,121,244,22,141,62,284,246,277,223,94,47,112,205,101,249,143,204,104,266,20,152,57,211,72,283,139,164,256,192,225,259,37,224,270,17,150,181,7,67,130,178,234,38,131,165,11,157,0,237,194,107,174,31,264,112,175,235,122,69,19,104,241,163,35,103,15,271,158,277,74,209,97,133,182,118,0,101,213,65,170,264,72,151,30,268,92,175,57,255,217,262,23,62,228,11,247,161,194,121,148,31,214,90,260,113,219,171,100,46,128,61,235,196,10,274,251,75,222,118,7,143,174,272,185,33,73,139,276,184,49,226,267,204,133,32,74,261,48,228,19,146,96,172,117,212,182,0,91,186,80,219,122,156,13,275,254,106,191,143,105,250,282,99,50,192,239,170,136,179,44,162,92,256,73,18,201,146,66,19,166,101,132,157,34,272,13,57,199,84,279,104,10,263,81,210,37,235,112,63,105,264,50,177,36,238,55,142,166,113,202,77,188,20,183,152,67,198,88,273,8,94,236,197,45,136,159,281,260,208,86,283,248,153,196,124,167,261,117,150,279,46,223,286,207,23,270,28,140,34,255,208,65,266,187,155,245,109,41,185,147,283,48,93,180,214,120,56,14,91,131,216,67,115,160,58,119,258,107,138,26,76,178,46,134,240,193,92,199,27,154,133,234,60,283,226,256,211,269,187,5,272,103,61,4,248,275,135,58,210,25,168,252,215,173,95,129,172,114,184,232,179,33,262,151,256,112,6,157,97,47,131,278,10,166,137,35,122,146,21,181,24,249,89,274,57,224,193,111,218,253,50,165,216,73,282,229,162,277,11,244,116,33,130,281,76,4,267,17,180,155,67,22`
  let IMG_SIZE = 500;
  let MAX_LINES = 3000;// 4000;
  let pin_coords;
  let N_PINS = 300;
  const t = this
  function CalculatePins(){
      console.log("Calculating pins...");
      pin_coords = [];
      let center = IMG_SIZE / 2;
      let radius = IMG_SIZE / 2 - 1/2

      for(let i=0; i < N_PINS; i++){
          let angle = 2 * Math.PI * i / N_PINS;
          pin_coords.push([Math.floor(center + radius * Math.cos(angle)),
              Math.floor(center + radius * Math.sin(angle))]);
      }
  }
  function startDrawing(){
    const base_image2 = new Image();
    ctx.canvas.width = IMG_SIZE * 2;
    ctx.canvas.height = IMG_SIZE * 2;
    ctx.clearRect(0,0, IMG_SIZE * 2, IMG_SIZE * 2);
    ctx.drawImage(base_image2, 0, 0, IMG_SIZE * 2, IMG_SIZE * 2);

    const line_sequence = points.split(",").map(V => { return parseInt(V)});

    window.scrollTo({ top: 5000, left: 0, behavior: 'smooth' });

    let pointIndex = 0;
    if(pin_coords == null){
        CalculatePins();
    }
    let j = 0;

    const textToSpeech = (text) => {
      const U = new window.SpeechSynthesisUtterance(text);
      const voices = window.speechSynthesis.getVoices();
      U.voice = voices[27];
      window.speechSynthesis.speak(U);
    }

    (function codeBlock(){
        if(j < MAX_LINES - 1){
            pointIndex+=t.autoStep;
            const autoStepHandler = () => {
              for(let item = pointIndex; item <= pointIndex + t.autoStep; item++){
                ctx.beginPath();
                ctx.moveTo(pin_coords[line_sequence[item - 1]][0] * 2, pin_coords[line_sequence[item - 1]][1] * 2);
                ctx.lineTo(pin_coords[line_sequence[item]][0] * 2, pin_coords[line_sequence[item]][1] * 2);
                ctx.strokeStyle = "black";
                ctx.lineWidth = 0.3;
                ctx.stroke();
              }
            }
            autoStepHandler()
            j+=t.autoStep;
            t.outputItems.push({value: line_sequence[pointIndex], key: j})
            
            if(t.toggler) {
                textToSpeech(line_sequence[pointIndex].toString()); 
            }
            setTimeout(codeBlock, 1000);
        }
    })();

}

startDrawing()
  }
}
</script>

<style lang="scss" scoped>
$green: #25E477;
$dark-green: #154645;
$white: #E3ECEC;

@import 'vue-range-slider/dist/vue-range-slider.css';
@import url('https://fonts.googleapis.com/css2?family=Golos+Text:wght@400..900&display=swap');

.main {
  width: 30%;
  min-height: calc(100vh - 45px); /* Учитываем отступ сверху */
  background: $dark-green;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  border-radius: 20px; 
  margin: auto; 
margin-top: 45px;
  // Остальные стили остаются без изменений


  .main-line-list-container {
  display: flex;
  align-items: center;
  gap: 10px;
}
  
  &-volume{
    width: 100%;
  }
  &-handler{
    display: flex;
    align-items: center;
    gap: 20px;
    &-title{
      padding: 10px 15px;
      border-radius: 30px;
      color: $white;
      border: 1px solid $green;
    }
  }

  /* Прокрутка к якорной ссылке с плавным эффектом */
html {
  scroll-behavior: smooth;
}

.main-line-list {
  display: flex;
  overflow-x: scroll;
  padding: 20px 0;
  justify-content: center;
   align-items: center;
  width: 100%; /* Ширина контейнера 100% */
  &::-webkit-scrollbar {
    display: none;
  }
  &-container {
    display: flex;
    align-items: center;
    gap: 10px;
  }
}

.main-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  &-key {
    font-family: "Golos Text", sans-serif;
    font-size: 20px;
    text-align: center;
    color: $white;
  }

  
  &-value {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 1px solid $green;
    font-family: "Golos Text", sans-serif;
    font-size: 20px;
    text-align: center;
    color: $white;
  }
}
.main-item-key {
  font-family: "Golos Text", sans-serif;
  font-size: 20px;
  text-align: center;
  color: #fff;
}
.main-item-value {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 1px solid #3b9e3b;
  font-family: "Golos Text", sans-serif;
  font-size: 20px;
  text-align: center;
  color: #fff;
}
/* Стили для иконок соц сетей */
.social-icons {
  list-style-type: none;
  padding: 0;
}

.social-icons li {
  display: inline-block;
  margin-right: 10px; /* Добавляем немного отступа между иконками */
}

.social-icons li:last-child {
  margin-right: 0;
}

.social-icons a {
  color: #000; /* Цвет иконок */
  text-decoration: none;
}

/* Пример изменения размера иконок */
.social-icons img {
  width: 30px;
  height: auto;
}

  &-toggle{
    position: relative;
    height: 30px;
    border-radius: 15px;
    width: 81px;
    background: $white;
    display: flex;
    align-items: center;
    padding: 0 6px 0 6px;
    transition: all .5s ease-in;
    justify-content: flex-end;
    &-circle{
      position: absolute;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid $green;
      background: $dark-green;
      top: -5px;
      left: 0;
      transition: all .5s ease-in-out;
    }
    span{
      font-size: 14px;
    }
  }
  &-autosteps{
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 10px;
    height: 40px;
    width: 200px;
    border-radius: 30px;
    border: 1px solid $green;
    padding: 0 10px;
    &-option{
      width: 24px;
      height: 24px;
      border-radius: 50%;
      color: $white;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    html, body {
  background-color: #77CBCE; /* Задний фон всей страницы */
}
    .selected{
      background: $green;
      color: $dark-green;
    }
  }
  &-autosteps-btn{
    width: 140px;
    height: 30px;
    background: $green;
    color: $dark-green;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    outline: none;
    border: none;
  }
  &-step-number{
    background: #fff;
    border-radius: 15px;
    width: 100%;
    height: 40px;
    padding: 10px;
    font-style: normal; 
    color: $dark-green;
    font-family: 'Arial Regular';
    outline: none;
    border: none;
  }
  &-step-number-btn{
    width: 140px;
    height: 30px;
    background: $green;
    color: $dark-green;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    outline: none;
    border: none;
  }
  &-line-list{
    overflow-x: scroll;
    padding: 20px 0;
    width: 90vw;
    &::-webkit-scrollbar {
      display: none;
    }
    &-container{
      display: flex;
      align-items: center;
      gap: 10px;
    }
  }
  &-btns{
    display: flex;
    align-items: center;
    gap: 10px;
  }
  &-btn{
    height: 40px;
    width: 100%;
    background: #033837;
    border-radius: 10px;
    border: none;
    outline: none;
    color: $green;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  &-item{
    display: flex;
    flex-direction: column;
    gap: 10px;
    &-key{
      font-family: "Golos Text", sans-serif;
      font-size: 20px;
      text-align: center;
      color: $white;
    }
    &-value{
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 1px solid $green;
      font-family: "Golos Text", sans-serif;
      font-size: 20px;
      text-align: center;
      color: $white;
    }

  }
  &-title{
    padding: 10px 20px; 
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    border: 1px solid $green;
    color: $white;
    font-size: 20px;
    border-radius: 10px;
  }
  &-drawinfo{
    display: flex;
    align-items: center;
    gap: 20px;
    font-size: 20px;
    color: $white;
  }
  &-output{
    display: flex;
    align-items: center;
    justify-content: center;
    canvas{
      width: 300px;
      height: 300px;
      border: 1px solid $green;
      background: $white;
    }
  }
  &-txt{
    width: 187px;
    height: 40px;
    background: $green;
    color: $dark-green;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    input{
      display: none;
    }
  }
  &-label{
    height: 40px;
    text-align: center;
    border-radius: 30px;
    border: 1px solid $green;
    color: $white;
    font-size: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  &-types{
    display: flex;
    align-items: center;
    justify-content: space-around;
    & > div {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* Медиа-запрос для мобильных устройств с шириной экрана до 767px */
@media only screen and (max-width: 767px) {
  /* Примеры изменений стилей для адаптации под мобильные устройства */
  
  /* Пример скрытия стандартного меню и отображения бургер-меню */
  .menu {
    display: none;
  }
  .burger-menu {
    display: block;
  }
  
  /* Пример уменьшения размера кнопок навигации */
  .nav-button {
    font-size: 14px;
    padding: 8px 12px;
  }
  
  /* Пример размещения кнопок навигации в нижней части экрана */
  .navigation {
    position: fixed;
    bottom: 0;
    width: 100%;
    background-color: #fff;
    border-top: 1px solid #ccc;
  }
  
  /* Пример увеличения размера поля для выбора файла */
  .file-input {
    font-size: 16px;
    padding: 12px;
  }
  
  /* Пример адаптации размеров элементов интерфейса */
  .element {
    width: 100%;
    margin-bottom: 10px;
  }
  
  /* Пример адаптации размера canvas */
  canvas {
    width: 100%;
    height: auto;
  }
  
  /* Пример изменения стилей для удобного отображения номера шага */
  .step-number {
    font-size: 14px;
    margin-bottom: 6px;
  }
}

    &-square{
      width: 100px;
      height: 100px;
      border: 1px solid $green;
    }
    &-circle{
      width: 100px;
      height: 100px;
      border-radius: 100%;
      border: 1px solid $green;
    }
  }
}

.circle-active{
  transform: translateX(44px);
}
.toggler-active{
  background: $dark-green;
  border: 1px solid $green;
  justify-content: flex-start;
  span{
    color: $white;
  }
}

.Menu {
  text-align: center; /* Центрируем содержимое меню */
  background-color:$dark-green; /* Темно-зеленый фон */
  padding: 10px 0; /* Добавляем немного отступа сверху и снизу для улучшенного визуального восприятия */
}

.Menu li {
  display: inline-block; /* Размещаем пункты меню в одной строке */
  margin-right: 20px; /* Отступ между пунктами меню */
}

.Menu li:last-child {
  margin-right: 0; /* Убираем отступ справа у последнего пункта меню */
}

.Menu a {
  color: white; /* Белый цвет текста для ссылок */
  text-decoration: none; /* Убираем подчеркивание для ссылок */
  font-weight: bold; /* Жирный шрифт для ссылок */
  padding: 5px 10px; /* Добавляем отступы для улучшенного визуального восприятия */
  border-radius: 5px; /* Закругляем углы */
}

.Menu a:hover {
  background-color: #238b5d; /* Изменяем фон при наведении на ссылку */
}
.container1 {
  margin-top: 45px;
  border-bottom: 15px;
  justify-content: center;
  text-align: center;
  background-color: #033837;
  padding: 20px;
  border-radius: 15px 15px 25px 25px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  max-width: 400px;
  width: 100%;
  margin-left: auto;
  margin-right: auto;
}


.instruction-box1 {
  text-align: center;
  color: white;
}

.instruction-box1 h1 {
  margin-bottom: 20px;
  font-size: 24px;
}

.email-section {
  margin-bottom: 20px;
}

.email-section p {
  margin-bottom: 10px;
}

.email-section input {
  width: calc(100% - 20px);
  padding: 10px;
  border: none;
  border-radius: 5px;
  margin-bottom: 10px;
}

.email-section button {
  width: 100%;
  padding: 10px;
  background-color: #3b9e3b;
  border: none;
  border-radius: 5px;
  color: white;
  cursor: pointer;
}

.email-section button:hover {
  background-color: #2e8c2e;
}

.support-section p {
  margin: 10px 0;
}

.support-section a {
  color: #25e477;
  text-decoration: none;
}

.support-section .social-icons {
  display: flex;
  justify-content: center;
  margin-top: 10px;
}

.support-section .social-icons a {
  margin: 0 5px;
}

.support-section .social-icons img {
  width: 24px;
  height: 24px;
}
</style>
